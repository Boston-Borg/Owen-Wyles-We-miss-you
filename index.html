<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>4.23.26 — In Memory of Owen Wyles</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=IM+Fell+English:ital@0;1&family=Cinzel:wght@300;400&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --ivory:      #faf7f2;
      --gold:       #c9a96e;
      --gold-light: #e8d5a3;
      --ash:        #8a8078;
      --deep:       #3a3530;
    }
    html, body {
      min-height: 100%; color: var(--deep);
      font-family: 'Cormorant Garamond', serif; overflow-x: hidden;
      background:
        radial-gradient(ellipse 120% 80% at 50% -20%, rgba(230,220,195,0.8) 0%, transparent 60%),
        radial-gradient(ellipse 80% 60% at 20% 100%, rgba(210,200,180,0.4) 0%, transparent 50%),
        radial-gradient(ellipse 80% 60% at 80% 100%, rgba(220,210,190,0.4) 0%, transparent 50%),
        #faf7f2;
    }

    /* CLOUDS */
    #clouds { position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden; }
    .cloud { position:absolute;background:white;border-radius:50%;opacity:0;animation:drift linear infinite; }
    @keyframes drift {
      0%  { transform:translateX(-120%);opacity:0; }
      5%  { opacity:var(--op); }
      95% { opacity:var(--op); }
      100%{ transform:translateX(110vw);opacity:0; }
    }

    /* PARTICLES */
    #particles { position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden; }
    .mote { position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(255,255,220,0.9) 0%,transparent 70%);animation:float-up linear infinite; }
    @keyframes float-up {
      0%  { transform:translateY(0) translateX(0) scale(1);opacity:0; }
      10% { opacity:1; }
      90% { opacity:0.6; }
      100%{ transform:translateY(-110vh) translateX(var(--drift)) scale(0.3);opacity:0; }
    }

    /* LAYOUT */
    .page { position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;padding:60px 20px 80px; }

    /* HEADER */
    .header-label {
      font-family:'Cinzel',serif;font-weight:300;font-size:clamp(9px,1.2vw,11px);
      letter-spacing:0.5em;text-transform:uppercase;color:var(--ash);margin-bottom:28px;
      opacity:0;animation:softin 1.4s ease 0.2s forwards;
    }
    .name-block { text-align:center;opacity:0;animation:softin 1.6s ease 0.5s forwards; }
    .name-first {
      font-family:'IM Fell English',serif;font-style:italic;
      font-size:clamp(24px,5vw,48px);color:var(--ash);letter-spacing:0.3em;display:block;
    }
    .name-last {
      font-family:'Cinzel',serif;font-weight:300;
      font-size:clamp(90px,22vw,220px);line-height:0.88;color:var(--deep);letter-spacing:0.05em;display:block;
    }
    .grieve-line {
      font-family:'IM Fell English',serif;font-style:italic;
      font-size:clamp(14px,2.2vw,22px);color:var(--ash);text-align:center;
      margin-top:20px;letter-spacing:0.05em;opacity:0;animation:softin 1.6s ease 0.9s forwards;
    }

    /* DIVIDER */
    .divider {
      display:flex;align-items:center;gap:16px;width:100%;max-width:500px;margin:40px 0;
      opacity:0;animation:softin 1.2s ease 1.1s forwards;
    }
    .divider-line { flex:1;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent); }
    .divider-ornament { font-size:16px;color:var(--gold);line-height:1; }

    /* ═══════════════════════════════
       WINGS SECTION
       Wings are SVGs sitting as
       normal flex siblings to the card.
       They point straight out, no wrap.
    ═══════════════════════════════ */
    .wings-section {
      display:flex;align-items:center;justify-content:center;
      width:100%;margin:10px 0 50px;
      opacity:0;animation:softin 1.8s ease 1.3s forwards;
    }

    /* Each SVG wing is a direct flex child — no wrapper div */
    .wing-left {
      flex-shrink:0;
      transform-origin:right center;
      filter:drop-shadow(2px 4px 12px rgba(180,148,42,0.25));
      animation:wave-left 4s ease-in-out infinite;
    }
    .wing-right {
      flex-shrink:0;
      transform-origin:left center;
      filter:drop-shadow(-2px 4px 12px rgba(180,148,42,0.25));
      animation:wave-right 4s ease-in-out infinite;
    }

    /* Tips wave gently up and down */
    @keyframes wave-left {
      0%,100% { transform:perspective(500px) rotateY(0deg)  rotateZ(0deg); }
      50%      { transform:perspective(500px) rotateY(14deg) rotateZ(-3deg); }
    }
    @keyframes wave-right {
      0%,100% { transform:perspective(500px) rotateY(0deg)   rotateZ(0deg); }
      50%      { transform:perspective(500px) rotateY(-14deg) rotateZ(3deg); }
    }

    /* CARD */
    .message-card {
      position:relative;z-index:2;width:340px;flex-shrink:0;
      background:rgba(255,253,248,0.93);border:1px solid rgba(201,169,110,0.3);border-radius:4px;
      box-shadow:0 2px 40px rgba(58,53,48,0.1),0 0 0 4px rgba(255,253,248,0.6),0 0 0 5px rgba(201,169,110,0.12);
      padding:28px 24px 24px;text-align:center;backdrop-filter:blur(6px);
    }
    .message-card-title {
      font-family:'Cinzel',serif;font-weight:300;font-size:clamp(9px,1.1vw,11px);
      letter-spacing:0.4em;text-transform:uppercase;color:var(--gold);margin-bottom:16px;
    }
    .message-display {
      min-height:52px;display:flex;align-items:center;justify-content:center;
      padding:12px 8px;border-bottom:1px solid rgba(201,169,110,0.2);margin-bottom:18px;
    }
    .message-display p {
      font-family:'IM Fell English',serif;font-style:italic;
      font-size:clamp(14px,2vw,18px);color:var(--deep);line-height:1.5;
      transition:opacity 0.6s;text-align:center;
    }
    .message-display p.fade-msg { opacity:0; }
    .message-input-wrap { display:flex;flex-direction:column;gap:10px; }
    .message-input-wrap label { font-family:'Cormorant Garamond',serif;font-size:clamp(11px,1.3vw,13px);color:var(--ash);letter-spacing:0.1em; }
    .message-row { display:flex;gap:8px; }
    .message-input {
      flex:1;font-family:'IM Fell English',serif;font-style:italic;font-size:15px;color:var(--deep);
      background:rgba(250,247,242,0.8);border:1px solid rgba(201,169,110,0.4);border-radius:2px;
      padding:9px 12px;outline:none;transition:border-color 0.3s,box-shadow 0.3s;
    }
    .message-input:focus { border-color:var(--gold);box-shadow:0 0 0 3px rgba(201,169,110,0.12); }
    .message-input::placeholder { color:rgba(138,128,120,0.5);font-style:italic; }
    .char-count { font-size:10px;color:var(--ash);text-align:right;opacity:0.6; }
    .send-btn {
      font-family:'Cinzel',serif;font-weight:300;font-size:11px;letter-spacing:0.3em;
      text-transform:uppercase;color:var(--ivory);background:var(--gold);border:none;border-radius:2px;
      padding:10px 16px;cursor:pointer;transition:background 0.3s,transform 0.15s;white-space:nowrap;
    }
    .send-btn:hover { background:var(--deep); }
    .send-btn:active { transform:scale(0.97); }

    /* COUNTDOWN */
    .countdown-section { width:100%;max-width:760px;text-align:center;opacity:0;animation:softin 1.6s ease 1.6s forwards; }
    .countdown-label { font-family:'Cinzel',serif;font-weight:300;font-size:clamp(9px,1.2vw,11px);letter-spacing:0.5em;text-transform:uppercase;color:var(--ash);margin-bottom:24px; }
    .countdown-grid { display:grid;grid-template-columns:repeat(4,1fr);gap:clamp(8px,2vw,20px);margin-bottom:16px; }
    .unit-block { display:flex;flex-direction:column;align-items:center;gap:10px;position:relative; }
    .unit-block:not(:last-child)::after { content:'·';position:absolute;right:clamp(-14px,-2vw,-10px);top:14px;font-family:'Cormorant Garamond',serif;font-size:clamp(32px,6vw,64px);color:var(--gold-light);line-height:1; }
    .unit-number {
      font-family:'Cinzel',serif;font-weight:300;font-size:clamp(40px,9vw,100px);line-height:1;
      color:var(--deep);background:rgba(255,253,248,0.7);width:100%;text-align:center;
      padding:18px 8px 14px;border:1px solid rgba(201,169,110,0.2);border-bottom:2px solid var(--gold-light);
      box-shadow:0 4px 24px rgba(58,53,48,0.06),inset 0 1px 0 rgba(255,255,255,0.8);
      position:relative;overflow:hidden;
    }
    .unit-number::before { content:'';position:absolute;top:0;left:0;right:0;height:50%;background:rgba(255,255,255,0.3);pointer-events:none; }
    .unit-number.tick { animation:gentle-tick 0.3s ease; }
    @keyframes gentle-tick { 0%{color:var(--gold);}100%{color:var(--deep);} }
    .unit-label { font-family:'Cinzel',serif;font-weight:300;font-size:clamp(8px,0.9vw,10px);letter-spacing:0.4em;text-transform:uppercase;color:var(--ash);opacity:0.7; }
    .date-stamp { margin-top:32px;font-family:'Cinzel',serif;font-weight:300;font-size:clamp(36px,8vw,90px);letter-spacing:0.3em;color:var(--deep);opacity:0.55; }

    /* POSTS */
    .posts-section { margin-top:52px;text-align:center;opacity:0;animation:softin 1.4s ease 1.9s forwards; }
    .posts-section::before { content:'';display:block;width:1px;height:40px;background:linear-gradient(180deg,transparent,var(--gold),transparent);margin:0 auto 24px; }
    .posts-label { font-family:'Cinzel',serif;font-weight:300;font-size:clamp(8px,1vw,10px);letter-spacing:0.5em;text-transform:uppercase;color:var(--ash);margin-bottom:10px;opacity:0.6; }
    .posts-number { font-family:'Cinzel',serif;font-weight:300;font-size:clamp(32px,6vw,64px);color:var(--gold);letter-spacing:0.1em; }
    .posts-sub { font-family:'IM Fell English',serif;font-style:italic;font-size:clamp(12px,1.5vw,15px);color:var(--ash);margin-top:6px;opacity:0.7; }

    /* FOOTER */
    .footer { margin-top:60px;text-align:center;opacity:0;animation:softin 1.4s ease 2.1s forwards; }
    .footer p { font-family:'IM Fell English',serif;font-style:italic;font-size:clamp(13px,1.7vw,17px);color:var(--ash);opacity:0.6;line-height:1.8; }
    .insta-link { display:inline-block;margin-top:22px;font-family:'Cinzel',serif;font-weight:300;font-size:clamp(18px,3.5vw,36px);letter-spacing:0.2em;color:var(--deep);text-decoration:none;border-bottom:1px solid var(--gold);padding-bottom:4px;transition:color 0.3s,border-color 0.3s;opacity:0.75; }
    .insta-link:hover { color:var(--gold);opacity:1; }

    /* TOAST */
    .toast { position:fixed;bottom:40px;left:50%;transform:translateX(-50%) translateY(20px);background:var(--deep);color:var(--ivory);font-family:'Cinzel',serif;font-size:11px;letter-spacing:0.3em;text-transform:uppercase;padding:12px 24px;border-radius:2px;opacity:0;pointer-events:none;transition:opacity 0.4s,transform 0.4s;z-index:1000; }
    .toast.show { opacity:1;transform:translateX(-50%) translateY(0); }

    /* FLOWERS */
    #garden-zone { position:fixed;bottom:0;left:0;width:100%;height:220px;pointer-events:none;z-index:50;overflow:visible; }
    .raindrop { position:fixed;width:3px;border-radius:0 0 3px 3px;background:linear-gradient(180deg,rgba(201,169,110,0) 0%,rgba(201,169,110,0.7) 100%);pointer-events:none;z-index:9990;animation:raindrop-fall 0.55s ease-in forwards; }
    @keyframes raindrop-fall { 0%{opacity:0.9;transform:scaleY(1);}80%{opacity:0.7;}100%{opacity:0;transform:scaleY(0.2) translateY(10px);} }
    .flower { position:absolute;bottom:0;pointer-events:none;transform-origin:bottom center;animation:bloom-up 1.2s cubic-bezier(0.34,1.56,0.64,1) forwards; }
    @keyframes bloom-up { 0%{transform:scaleY(0) scaleX(0);opacity:0;}40%{opacity:1;}70%{transform:scaleY(1.08) scaleX(1.08);}85%{transform:scaleY(0.96) scaleX(0.96);}100%{transform:scaleY(1) scaleX(1);opacity:1;} }
    .flower.fade-out { animation:flower-fade 2s ease forwards; }
    @keyframes flower-fade { 0%{opacity:1;transform:scaleY(1);}70%{opacity:0.6;}100%{opacity:0;transform:scaleY(0.7) translateY(10px);} }

    @keyframes softin { from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:translateY(0);} }

    @media(max-width:640px){
      .wing-left,.wing-right{display:none;}
      .unit-block:not(:last-child)::after{right:-10px;}
    }
  </style>
</head>
<body>

<div id="clouds"></div>
<div id="particles"></div>
<div id="garden-zone"></div>
<div class="toast" id="toast">Message received ✦</div>

<div class="page">

  <p class="header-label">In remembrance · 4 · 23 · 26</p>

  <div class="name-block">
    <span class="name-first">Owen</span>
    <span class="name-last">Wyles</span>
  </div>

  <p class="grieve-line">We grieve even before you have left us.</p>

  <div class="divider">
    <div class="divider-line"></div>
    <div class="divider-ornament">✦</div>
    <div class="divider-line"></div>
  </div>

  <div class="wings-section">

    <!-- LEFT WING — golden angel/dove wing pointing straight left -->
    <!-- Root is on the RIGHT side of this SVG (touches the card).
         Feathers sweep outward to the LEFT.                        -->
    <svg class="wing-left" width="260" height="180" viewBox="0 0 260 180" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="gL" x1="1" y1="0.45" x2="0" y2="0.55">
          <stop offset="0%"  stop-color="#f0e0b0" stop-opacity="1"/>
          <stop offset="30%" stop-color="#d4b870" stop-opacity="0.97"/>
          <stop offset="65%" stop-color="#c9a96e" stop-opacity="0.8"/>
          <stop offset="100%" stop-color="#a07830" stop-opacity="0.1"/>
        </linearGradient>
        <!-- sheen gradient -->
        <linearGradient id="shL" x1="1" y1="0" x2="0" y2="1">
          <stop offset="0%"  stop-color="#fff8e0" stop-opacity="0.45"/>
          <stop offset="100%" stop-color="#fff8e0" stop-opacity="0"/>
        </linearGradient>
      </defs>

      <!-- MAIN WING BODY
           Think of a bird wing viewed from above/slightly front.
           Root (attachment) is at approx x=248, y=90 (right side).
           Primary feathers fan out to the LEFT.
           Upper coverts form the top curved edge.
           Lower coverts / tertials form the bottom curved edge. -->
      <path d="
        M 248 90
        C 225 80, 195 65, 155 45
        C 120 28, 78 14,  38 10
        C 15  8,  4  12,  2  22
        C 18  18, 48  22, 78  34
        C 46  28, 16  32,  4  44
        C 22  40, 52  42, 82  52
        C 52  48, 22  54,  6  66
        C 24  62, 56  62, 86  70
        C 56  70, 26  76,  8  88
        C 28  84, 60  84, 90  88
        C 60  92, 28  98,  8 110
        C 30 104, 62 102, 92 104
        C 64 112, 34 120, 12 128
        C 36 122, 68 118, 98 118
        C 76 128, 50 136, 28 142
        C 54 136, 82 130,110 128
        C 94 138, 74 148, 56 154
        C 78 146,104 138,128 136
        C 116 146,102 156, 90 162
        C 108 152,128 142,148 140
        C 140 150,130 160,122 166
        C 138 156,154 146,168 144
        C 163 154,155 163,150 170
        C 163 160,176 150,188 148
        C 185 158,179 167,175 173
        C 186 163,196 153,204 150
        C 202 160,198 169,195 175
        C 205 165,212 154,218 151
        C 218 161,215 170,213 176
        C 220 166,226 155,230 151
        C 231 161,229 170,227 176
        C 234 165,239 154,241 149
        C 243 159,242 168,240 174
        C 245 163,248 151,249 144
        C 250 134,250 112,248 90Z
      " fill="url(#gL)"/>

      <!-- Sheen overlay on upper half -->
      <path d="
        M 248 90
        C 225 80,195 65,155 45
        C 120 28,78 14,38 10
        C 15 8,4 12,2 22
        C 18 18,48 22,78 34
        C 46 28,16 32,4 44
        C 22 40,52 42,82 52
        C 52 48,22 54,6 66
        C 24 62,56 62,86 70
        C 56 70,26 76,8 88
        C 28 84,60 84,90 88
      " fill="url(#shL)"/>

      <!-- Feather quill lines fanning from root leftward -->
      <path d="M 245 86  C 195 70, 120 48,  30 24"  stroke="#a07830" stroke-width="0.9" opacity="0.28" fill="none"/>
      <path d="M 246 92  C 196 80, 118 72,  12 80"  stroke="#a07830" stroke-width="0.9" opacity="0.24" fill="none"/>
      <path d="M 246 98  C 196 92, 118 92,  12 106" stroke="#a07830" stroke-width="0.8" opacity="0.2"  fill="none"/>
      <path d="M 244 106 C 194 106,116 110,  14 124" stroke="#a07830" stroke-width="0.7" opacity="0.17" fill="none"/>
      <path d="M 240 116 C 192 118,116 122,  28 136" stroke="#a07830" stroke-width="0.6" opacity="0.14" fill="none"/>
      <path d="M 232 128 C 188 130,118 134,  54 146" stroke="#a07830" stroke-width="0.6" opacity="0.12" fill="none"/>
      <path d="M 218 140 C 180 142,130 146,  88 156" stroke="#a07830" stroke-width="0.5" opacity="0.1"  fill="none"/>
      <path d="M 196 150 C 166 152,140 154, 114 162" stroke="#a07830" stroke-width="0.4" opacity="0.08" fill="none"/>
    </svg>

    <!-- MESSAGE CARD -->
    <div class="message-card">
      <div class="message-card-title">Leave a farewell</div>
      <div class="message-display">
        <p id="msg-display">He was never just a story.</p>
      </div>
      <div class="message-input-wrap">
        <label>Say goodbye to Owen</label>
        <div class="message-row">
          <input class="message-input" id="msg-input" type="text" maxlength="50" placeholder="Your words…" autocomplete="off"/>
          <button class="send-btn" id="send-btn">Send</button>
        </div>
        <div class="char-count"><span id="char-num">0</span> / 50</div>
      </div>
    </div>

    <!-- RIGHT WING — exact mirror, root on LEFT side, feathers sweep RIGHT -->
    <svg class="wing-right" width="260" height="180" viewBox="0 0 260 180" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="gR" x1="0" y1="0.45" x2="1" y2="0.55">
          <stop offset="0%"  stop-color="#f0e0b0" stop-opacity="1"/>
          <stop offset="30%" stop-color="#d4b870" stop-opacity="0.97"/>
          <stop offset="65%" stop-color="#c9a96e" stop-opacity="0.8"/>
          <stop offset="100%" stop-color="#a07830" stop-opacity="0.1"/>
        </linearGradient>
        <linearGradient id="shR" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%"  stop-color="#fff8e0" stop-opacity="0.45"/>
          <stop offset="100%" stop-color="#fff8e0" stop-opacity="0"/>
        </linearGradient>
      </defs>

      <!-- Mirror of left wing — root at x=12, feathers sweep to x=258 -->
      <path d="
        M 12 90
        C 35 80,  65 65, 105 45
        C 140 28, 182 14, 222 10
        C 245  8, 256  12, 258  22
        C 242  18, 212  22, 182  34
        C 214  28, 244  32, 256  44
        C 238  40, 208  42, 178  52
        C 208  48, 238  54, 254  66
        C 236  62, 204  62, 174  70
        C 204  70, 234  76, 252  88
        C 232  84, 200  84, 170  88
        C 200  92, 232  98, 252 110
        C 230 104, 198 102, 168 104
        C 196 112, 226 120, 248 128
        C 224 122, 192 118, 162 118
        C 184 128, 210 136, 232 142
        C 206 136, 178 130, 150 128
        C 166 138, 186 148, 204 154
        C 182 146, 156 138, 132 136
        C 144 146, 158 156, 170 162
        C 152 152, 132 142, 112 140
        C 120 150, 130 160, 138 166
        C 122 156, 106 146,  92 144
        C  97 154, 105 163, 110 170
        C  97 160,  84 150,  72 148
        C  75 158,  81 167,  85 173
        C  74 163,  64 153,  56 150
        C  58 160,  62 169,  65 175
        C  55 165,  48 154,  42 151
        C  42 161,  45 170,  47 176
        C  40 166,  34 155,  30 151
        C  29 161,  31 170,  33 176
        C  26 165,  21 154,  19 149
        C  17 159,  18 168,  20 174
        C  15 163,  12 151,  11 144
        C  10 134,  10 112,  12 90Z
      " fill="url(#gR)"/>

      <path d="
        M 12 90 C 35 80,65 65,105 45
        C 140 28,182 14,222 10
        C 245 8,256 12,258 22
        C 242 18,212 22,182 34
        C 214 28,244 32,256 44
        C 238 40,208 42,178 52
        C 208 48,238 54,254 66
        C 236 62,204 62,174 70
        C 204 70,234 76,252 88
        C 232 84,200 84,170 88
      " fill="url(#shR)"/>

      <path d="M 15 86  C 65 70, 140 48, 230 24"  stroke="#a07830" stroke-width="0.9" opacity="0.28" fill="none"/>
      <path d="M 14 92  C 64 80, 142 72, 248 80"  stroke="#a07830" stroke-width="0.9" opacity="0.24" fill="none"/>
      <path d="M 14 98  C 64 92, 142 92, 248 106" stroke="#a07830" stroke-width="0.8" opacity="0.2"  fill="none"/>
      <path d="M 16 106 C 66 106,144 110, 246 124" stroke="#a07830" stroke-width="0.7" opacity="0.17" fill="none"/>
      <path d="M 20 116 C 68 118,144 122, 232 136" stroke="#a07830" stroke-width="0.6" opacity="0.14" fill="none"/>
      <path d="M 28 128 C 72 130,142 134, 206 146" stroke="#a07830" stroke-width="0.6" opacity="0.12" fill="none"/>
      <path d="M 42 140 C 80 142,130 146, 172 156" stroke="#a07830" stroke-width="0.5" opacity="0.1"  fill="none"/>
      <path d="M 64 150 C 94 152,120 154, 146 162" stroke="#a07830" stroke-width="0.4" opacity="0.08" fill="none"/>
    </svg>

  </div><!-- /wings-section -->

  <!-- Countdown -->
  <div class="countdown-section">
    <p class="countdown-label">Time remaining</p>
    <div class="countdown-grid">
      <div class="unit-block"><div class="unit-number" id="days">--</div><div class="unit-label">Days</div></div>
      <div class="unit-block"><div class="unit-number" id="hours">--</div><div class="unit-label">Hours</div></div>
      <div class="unit-block"><div class="unit-number" id="minutes">--</div><div class="unit-label">Minutes</div></div>
      <div class="unit-block"><div class="unit-number" id="seconds">--</div><div class="unit-label">Seconds</div></div>
    </div>
    <div class="date-stamp">4 · 23 · 26</div>
  </div>

  <div class="posts-section">
    <div class="posts-label">Farewells remaining</div>
    <div class="posts-number" id="posts-count">--</div>
    <div class="posts-sub">two posts a day, until the last</div>
  </div>

  <div class="divider" style="margin-top:52px;">
    <div class="divider-line"></div>
    <div class="divider-ornament">✦</div>
    <div class="divider-line"></div>
  </div>

  <div class="footer">
    <p>"Some endings are written long before we are ready<br>to turn the page."</p>
    <a class="insta-link" href="https://instagram.com/4_23_26" target="_blank">@4_23_26</a>
  </div>

</div><!-- /page -->

<script>
  /* CLOUDS */
  const CC = document.getElementById('clouds');
  [{w:320,h:90,top:6,dur:90,delay:0,op:.55},{w:200,h:60,top:12,dur:70,delay:15,op:.4},
   {w:420,h:110,top:3,dur:120,delay:30,op:.45},{w:260,h:75,top:20,dur:80,delay:8,op:.35},
   {w:180,h:55,top:28,dur:100,delay:45,op:.3},{w:350,h:95,top:8,dur:110,delay:60,op:.5},
   {w:150,h:45,top:35,dur:75,delay:22,op:.28},{w:290,h:80,top:15,dur:95,delay:50,op:.38}
  ].forEach(c=>{
    const el=document.createElement('div');el.className='cloud';
    el.style.cssText=`width:${c.w}px;height:${c.h}px;top:${c.top}%;--op:${c.op};animation-duration:${c.dur}s;animation-delay:${c.delay}s;box-shadow:${c.w*.3}px ${-c.h*.15}px 0 ${c.h*.15}px white,${c.w*.55}px ${-c.h*.25}px 0 ${c.h*.05}px white,${c.w*.15}px ${-c.h*.1}px 0 ${c.h*.2}px white`;
    CC.appendChild(el);
  });

  /* MOTES */
  const PC=document.getElementById('particles');
  for(let i=0;i<30;i++){
    const m=document.createElement('div');m.className='mote';const s=2+Math.random()*5;
    m.style.cssText=`left:${Math.random()*100}%;bottom:${-10+Math.random()*20}%;width:${s}px;height:${s}px;--drift:${-30+Math.random()*60}px;animation-duration:${8+Math.random()*14}s;animation-delay:${Math.random()*12}s`;
    PC.appendChild(m);
  }

  /* COUNTDOWN */
  const TARGET=new Date('April 23, 2026 00:00:00').getTime();
  const $d=document.getElementById('days'),$h=document.getElementById('hours'),
        $m=document.getElementById('minutes'),$s=document.getElementById('seconds'),
        $p=document.getElementById('posts-count');
  function pad(n){return String(n).padStart(2,'0');}
  function te(el,v){if(el.textContent!==v){el.textContent=v;el.classList.remove('tick');void el.offsetWidth;el.classList.add('tick');}}
  function tick(){
    const diff=TARGET-Date.now();
    if(diff<=0){document.querySelector('.countdown-section').innerHTML=`<p style="font-family:'IM Fell English',serif;font-style:italic;font-size:clamp(22px,4vw,40px);color:var(--ash);text-align:center;line-height:1.8">He is gone.<br><span style="font-size:.7em;opacity:.6">April 23, 2026</span></p>`;$p.textContent='0';return;}
    const s=Math.floor(diff/1000);
    te($s,pad(s%60));te($m,pad(Math.floor(s/60)%60));te($h,pad(Math.floor(s/3600)%24));te($d,pad(Math.floor(s/86400)));
    $p.textContent=Math.ceil(diff/86400000)*2;
  }
  tick();setInterval(tick,1000);

  /* MESSAGES — shared across all visitors via persistent storage */
  const DEFS=["He was never just a story.","We'll remember every word.","Not ready to say goodbye.","You deserved more time.","The page isn't ready to turn."];
  let msgs=[...DEFS];
  let mi=0;
  const disp=document.getElementById('msg-display');

  // Load shared messages from persistent storage
  async function loadMessages(){
    try {
      const result = await window.storage.get('owen_farewell_messages', true);
      const saved = JSON.parse(result.value);
      if(Array.isArray(saved) && saved.length) msgs=[...DEFS,...saved];
    } catch(e){ /* no saved messages yet, use defaults */ }
  }

  // Save a new message to shared storage
  async function saveMessage(val){
    let saved = [];
    try {
      const result = await window.storage.get('owen_farewell_messages', true);
      saved = JSON.parse(result.value);
      if(!Array.isArray(saved)) saved = [];
    } catch(e){ saved = []; }
    saved.push(val);
    await window.storage.set('owen_farewell_messages', JSON.stringify(saved), true);
  }

  function cycleNext(){
    disp.classList.add('fade-msg');
    setTimeout(()=>{mi=(mi+1)%msgs.length;disp.textContent=msgs[mi];disp.classList.remove('fade-msg');},600);
  }

  loadMessages().then(()=>{ setInterval(cycleNext, 4000); });

  const inp=document.getElementById('msg-input'),sb=document.getElementById('send-btn'),
        cn=document.getElementById('char-num'),toast=document.getElementById('toast');
  inp.addEventListener('input',()=>cn.textContent=inp.value.length);
  inp.addEventListener('keydown',e=>{if(e.key==='Enter')send();});
  sb.addEventListener('click',send);

  async function send(){
    const v=inp.value.trim();if(!v)return;
    msgs.push(v);
    try { await saveMessage(v); } catch(e){}
    disp.classList.add('fade-msg');
    setTimeout(()=>{mi=msgs.length-1;disp.textContent=msgs[mi];disp.classList.remove('fade-msg');},600);
    inp.value='';cn.textContent='0';
    toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),2500);
  }

  /* RAIN + FLOWERS */
  const garden=document.getElementById('garden-zone');
  const FT=[
    (x,sz,c)=>`<svg width="${sz*3}" height="${sz*4}" viewBox="0 0 60 80" style="position:absolute;left:${x-sz*1.5}px;bottom:0;overflow:visible"><path d="M30 78 C28 60,32 45,30 30" stroke="${c.st}" stroke-width="2" fill="none" stroke-linecap="round"/><path d="M30 55 C18 50,12 42,16 38 C22 44,28 50,30 55Z" fill="${c.lf}" opacity=".8"/>${Array.from({length:8},(_,i)=>{const a=(i/8)*Math.PI*2,px=30+Math.cos(a)*14,py=26+Math.sin(a)*14;return`<ellipse cx="${px}" cy="${py}" rx="5" ry="8" fill="${c.pt}" opacity=".9" transform="rotate(${i*45} ${px} ${py})"/>`;}).join('')}<circle cx="30" cy="26" r="6" fill="${c.ct}"/></svg>`,
    (x,sz,c)=>`<svg width="${sz*2.5}" height="${sz*4}" viewBox="0 0 50 80" style="position:absolute;left:${x-sz*1.25}px;bottom:0;overflow:visible"><path d="M25 78 C23 62,27 50,25 38" stroke="${c.st}" stroke-width="2" fill="none" stroke-linecap="round"/><path d="M25 58 C15 52,10 44,14 40 C19 46,23 52,25 58Z" fill="${c.lf}" opacity=".8"/><path d="M25 38 C15 38,10 28,12 18 C16 14,20 16,22 22 C22 14,24 8,25 6 C26 8,28 14,28 22 C30 16,34 14,38 18 C40 28,35 38,25 38Z" fill="${c.pt}"/></svg>`,
    (x,sz,c)=>`<svg width="${sz*3}" height="${sz*4}" viewBox="0 0 60 80" style="position:absolute;left:${x-sz*1.5}px;bottom:0;overflow:visible"><path d="M30 78 C26 60,34 48,30 32" stroke="${c.st}" stroke-width="2" fill="none" stroke-linecap="round"/><path d="M30 60 C20 56,14 46,18 42 C23 48,27 54,30 60Z" fill="${c.lf}" opacity=".8"/><path d="M30 32 C20 26,14 18,18 12 C24 10,28 18,30 24 C32 18,36 10,42 12 C46 18,40 26,30 32Z" fill="${c.pt}" opacity=".9"/><path d="M30 32 C20 38,14 44,18 50 C24 48,28 40,30 34 C32 40,36 48,42 50 C46 44,40 38,30 32Z" fill="${c.pt}" opacity=".85"/><circle cx="30" cy="30" r="4" fill="${c.ct}"/></svg>`,
    (x,sz,c)=>`<svg width="${sz*2}" height="${sz*3.5}" viewBox="0 0 40 70" style="position:absolute;left:${x-sz}px;bottom:0;overflow:visible"><path d="M20 68 C18 54,22 44,20 30" stroke="${c.st}" stroke-width="1.5" fill="none" stroke-linecap="round"/><path d="M20 48 C12 44,8 36,12 32 C16 38,19 44,20 48Z" fill="${c.lf}" opacity=".75"/>${Array.from({length:5},(_,i)=>{const a=(i/5)*Math.PI*2-Math.PI/2,px=20+Math.cos(a)*11,py=26+Math.sin(a)*11;return`<circle cx="${px}" cy="${py}" r="6" fill="${c.pt}" opacity=".88"/>`;}).join('')}<circle cx="20" cy="26" r="4" fill="${c.ct}"/></svg>`,
  ];
  const PAL=[
    {st:'#7a9e6e',lf:'#8ab87a',pt:'#e8c4b0',ct:'#c9a96e'},
    {st:'#7a9e6e',lf:'#8ab87a',pt:'#dfc4e0',ct:'#f5edd8'},
    {st:'#6b8f5e',lf:'#7aaa6a',pt:'#f5ddc8',ct:'#c9a96e'},
    {st:'#7a9e6e',lf:'#8ab87a',pt:'#b8cce0',ct:'#f0ead8'},
    {st:'#6b8f5e',lf:'#7aaa6a',pt:'#e8d5a3',ct:'#c9a96e'},
    {st:'#8a9e6e',lf:'#9ab87a',pt:'#f0c8c8',ct:'#e8c0c0'},
    {st:'#7a9e6e',lf:'#8ab87a',pt:'#d4e8c0',ct:'#a8c890'},
  ];
  let hovering=false,rainInt=null,mx=0;
  function spawnDrop(x,y){
    const d=document.createElement('div');d.className='raindrop';
    d.style.cssText=`left:${x+(Math.random()-.5)*12}px;top:${y}px;height:${18+Math.random()*22}px`;
    document.body.appendChild(d);
    setTimeout(()=>{spawnFlower(x+(Math.random()-.5)*30);d.remove();},520);
  }
  function spawnFlower(x){
    const t=Math.floor(Math.random()*FT.length),p=PAL[Math.floor(Math.random()*PAL.length)],sz=8+Math.random()*8;
    const w=document.createElement('div');w.className='flower';w.style.left=x+'px';w.style.animationDelay=(Math.random()*.15)+'s';
    w.innerHTML=FT[t](0,sz,p);garden.appendChild(w);
    setTimeout(()=>{w.classList.add('fade-out');setTimeout(()=>w.remove(),2000);},6000+Math.random()*3000);
  }
  function startRain(){if(rainInt)return;rainInt=setInterval(()=>{if(!hovering)return;for(let i=0;i<1+Math.floor(Math.random()*2);i++)spawnDrop(mx+(Math.random()-.5)*80,window.innerHeight-160-Math.random()*60);},180);}
  function stopRain(){if(rainInt){clearInterval(rainInt);rainInt=null;}}
  document.addEventListener('mousemove',e=>{
    mx=e.clientX;
    if(e.clientY>window.innerHeight*.5){if(!hovering){hovering=true;startRain();}}
    else{if(hovering){hovering=false;stopRain();}}
  });
  document.addEventListener('mouseleave',()=>{hovering=false;stopRain();});
</script>
</body>
</html>
